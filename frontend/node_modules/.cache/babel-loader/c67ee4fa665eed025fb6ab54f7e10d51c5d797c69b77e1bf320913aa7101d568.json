{"ast":null,"code":"var _s = $RefreshSig$();\nfunction useAsync(callback, deps = [], skip = false) {\n  _s();\n  const initialState = {\n    isLoading: false,\n    data: null,\n    error: null\n  };\n  const [state, dispatch] = useReducer(reducer, initialState);\n  useEffect(() => {\n    let isCancelled = false; // 취소 플래그\n\n    const fetchData = async () => {\n      dispatch({\n        type: 'LOADING'\n      });\n      try {\n        const response = await callback();\n        if (!isCancelled) {\n          // 취소되지 않았을 때만 상태 업데이트\n          dispatch({\n            type: 'SUCCESS',\n            data: response.data\n          });\n        }\n      } catch (e) {\n        if (!isCancelled) {\n          // 취소되지 않았을 때만 상태 업데이트\n          dispatch({\n            type: 'ERROR',\n            error: e\n          });\n        }\n      }\n    };\n    if (!skip) {\n      fetchData();\n    }\n    return () => {\n      isCancelled = true; // 클린업 시 취소 플래그 설정\n    };\n  }, deps);\n  const {\n    isLoading,\n    data,\n    error\n  } = state;\n  const refetch = async () => {\n    const isCancelled = false;\n    dispatch({\n      type: 'LOADING'\n    });\n    try {\n      const response = await callback();\n      if (!isCancelled) {\n        dispatch({\n          type: 'SUCCESS',\n          data: response.data\n        });\n      }\n    } catch (e) {\n      if (!isCancelled) {\n        dispatch({\n          type: 'ERROR',\n          error: e\n        });\n      }\n    }\n  };\n  return {\n    isLoading,\n    data: data,\n    error,\n    refetch\n  };\n}\n_s(useAsync, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\nexport default useAsync;","map":{"version":3,"names":["useAsync","callback","deps","skip","_s","initialState","isLoading","data","error","state","dispatch","useReducer","reducer","useEffect","isCancelled","fetchData","type","response","e","refetch"],"sources":["/Users/sarang_daddy/Documents/second-hand/frontend/src/hooks/useAsync.ts"],"sourcesContent":["function useAsync<T>(\n  callback: () => Promise<AxiosResponse<T>>,\n  deps: DependencyList = [],\n  skip = false,\n): {\n  isLoading: boolean;\n  data: T | null;\n  error: AxiosError | null;\n  refetch: () => Promise<void>;\n} {\n  const initialState: State<T> = {\n    isLoading: false,\n    data: null,\n    error: null,\n  };\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  useEffect(() => {\n    let isCancelled = false; // 취소 플래그\n\n    const fetchData = async () => {\n      dispatch({ type: 'LOADING' });\n      try {\n        const response: AxiosResponse<T> = await callback();\n        if (!isCancelled) {\n          // 취소되지 않았을 때만 상태 업데이트\n          dispatch({ type: 'SUCCESS', data: response.data });\n        }\n      } catch (e) {\n        if (!isCancelled) {\n          // 취소되지 않았을 때만 상태 업데이트\n          dispatch({ type: 'ERROR', error: e as AxiosError });\n        }\n      }\n    };\n\n    if (!skip) {\n      fetchData();\n    }\n\n    return () => {\n      isCancelled = true; // 클린업 시 취소 플래그 설정\n    };\n  }, deps);\n\n  const { isLoading, data, error } = state;\n\n  const refetch = async () => {\n    const isCancelled = false;\n    dispatch({ type: 'LOADING' });\n    try {\n      const response: AxiosResponse<T> = await callback();\n      if (!isCancelled) {\n        dispatch({ type: 'SUCCESS', data: response.data });\n      }\n    } catch (e) {\n      if (!isCancelled) {\n        dispatch({ type: 'ERROR', error: e as AxiosError });\n      }\n    }\n  };\n\n  return { isLoading, data: data as T, error, refetch };\n}\n\nexport default useAsync;\n"],"mappings":";AAAA,SAASA,QAAQA,CACfC,QAAyC,EACzCC,IAAoB,GAAG,EAAE,EACzBC,IAAI,GAAG,KAAK,EAMZ;EAAAC,EAAA;EACA,MAAMC,YAAsB,GAAG;IAC7BC,SAAS,EAAE,KAAK;IAChBC,IAAI,EAAE,IAAI;IACVC,KAAK,EAAE;EACT,CAAC;EAED,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGC,UAAU,CAACC,OAAO,EAAEP,YAAY,CAAC;EAE3DQ,SAAS,CAAC,MAAM;IACd,IAAIC,WAAW,GAAG,KAAK,CAAC,CAAC;;IAEzB,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5BL,QAAQ,CAAC;QAAEM,IAAI,EAAE;MAAU,CAAC,CAAC;MAC7B,IAAI;QACF,MAAMC,QAA0B,GAAG,MAAMhB,QAAQ,CAAC,CAAC;QACnD,IAAI,CAACa,WAAW,EAAE;UAChB;UACAJ,QAAQ,CAAC;YAAEM,IAAI,EAAE,SAAS;YAAET,IAAI,EAAEU,QAAQ,CAACV;UAAK,CAAC,CAAC;QACpD;MACF,CAAC,CAAC,OAAOW,CAAC,EAAE;QACV,IAAI,CAACJ,WAAW,EAAE;UAChB;UACAJ,QAAQ,CAAC;YAAEM,IAAI,EAAE,OAAO;YAAER,KAAK,EAAEU;UAAgB,CAAC,CAAC;QACrD;MACF;IACF,CAAC;IAED,IAAI,CAACf,IAAI,EAAE;MACTY,SAAS,CAAC,CAAC;IACb;IAEA,OAAO,MAAM;MACXD,WAAW,GAAG,IAAI,CAAC,CAAC;IACtB,CAAC;EACH,CAAC,EAAEZ,IAAI,CAAC;EAER,MAAM;IAAEI,SAAS;IAAEC,IAAI;IAAEC;EAAM,CAAC,GAAGC,KAAK;EAExC,MAAMU,OAAO,GAAG,MAAAA,CAAA,KAAY;IAC1B,MAAML,WAAW,GAAG,KAAK;IACzBJ,QAAQ,CAAC;MAAEM,IAAI,EAAE;IAAU,CAAC,CAAC;IAC7B,IAAI;MACF,MAAMC,QAA0B,GAAG,MAAMhB,QAAQ,CAAC,CAAC;MACnD,IAAI,CAACa,WAAW,EAAE;QAChBJ,QAAQ,CAAC;UAAEM,IAAI,EAAE,SAAS;UAAET,IAAI,EAAEU,QAAQ,CAACV;QAAK,CAAC,CAAC;MACpD;IACF,CAAC,CAAC,OAAOW,CAAC,EAAE;MACV,IAAI,CAACJ,WAAW,EAAE;QAChBJ,QAAQ,CAAC;UAAEM,IAAI,EAAE,OAAO;UAAER,KAAK,EAAEU;QAAgB,CAAC,CAAC;MACrD;IACF;EACF,CAAC;EAED,OAAO;IAAEZ,SAAS;IAAEC,IAAI,EAAEA,IAAS;IAAEC,KAAK;IAAEW;EAAQ,CAAC;AACvD;AAACf,EAAA,CAhEQJ,QAAQ;AAkEjB,eAAeA,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}