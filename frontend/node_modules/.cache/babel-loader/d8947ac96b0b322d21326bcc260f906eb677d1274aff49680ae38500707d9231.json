{"ast":null,"code":"var _jsxFileName = \"/Users/sarang_daddy/Documents/second-hand/frontend/src/components/UploadComment/index.tsx\",\n  _s = $RefreshSig$();\nimport { useContext, useState, useEffect } from 'react';\nimport { postSalesItemContext } from '../../context/SalesItem/useContext';\nimport * as S from './styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst COMMENT_PLACEHOLDER = '등록하실 게시물 내용을 작성해주세요. (판매금지 물품은 게시가 제한될 수 있어요.)';\nconst COMMENT_MAX_LENGTH = 500;\n\n// TODO : 엔터치면 무한이 늘어나는 텍스트에어리아 높이 제한 주기\n// https://bydawn25.tistory.com/44\n\nconst UploadComment = () => {\n  _s();\n  const {\n    postObject,\n    setPostObject\n  } = useContext(postSalesItemContext);\n  // const [inputComment, setInputComment] = useState<string | null>(\n  //   postObject.content ? postObject.content : null,\n  // );\n  const [textareaHeight, setTextareaHeight] = useState(110);\n  const [inputComment, setInputComment] = useState(null);\n  const storedPostObject = localStorage.getItem('postObject');\n  // console.log(JSON.parse(storedPostObject));\n\n  useEffect(() => {\n    if (storedPostObject) {\n      var _JSON$parse;\n      const storedContent = (_JSON$parse = JSON.parse(storedPostObject)) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse.content;\n      setInputComment(storedContent);\n    }\n  }, []);\n\n  // console.log(postObject);\n\n  const handleTextareaChange = event => {\n    const inputValue = event.target.value;\n    // const rowCount = inputValue.split(/\\r\\n|\\r|\\n/).length;\n    const newHeight = event.target.scrollHeight;\n    setInputComment(inputValue === '' ? null : inputValue);\n    if (inputComment !== null && inputComment.length > inputValue.length) {\n      setTextareaHeight(newHeight - 22);\n    } else {\n      setTextareaHeight(newHeight);\n    }\n    setPostObject(prevPostObject => ({\n      ...prevPostObject,\n      content: inputComment\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(S.CommentContainer, {\n      children: [/*#__PURE__*/_jsxDEV(S.testDiv, {\n        children: /*#__PURE__*/_jsxDEV(S.CommentTextarea, {\n          placeholder: COMMENT_PLACEHOLDER,\n          value: inputComment || '',\n          onChange: handleTextareaChange,\n          maxLength: COMMENT_MAX_LENGTH,\n          height: textareaHeight\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.CommentLengthNotify, {\n        children: [inputComment ? inputComment.length : 0, \" / \", COMMENT_MAX_LENGTH]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(UploadComment, \"vkKNYK0w9M05dTsivB/Vwdei2Aw=\");\n_c = UploadComment;\nexport default UploadComment;\nvar _c;\n$RefreshReg$(_c, \"UploadComment\");","map":{"version":3,"names":["useContext","useState","useEffect","postSalesItemContext","S","jsxDEV","_jsxDEV","Fragment","_Fragment","COMMENT_PLACEHOLDER","COMMENT_MAX_LENGTH","UploadComment","_s","postObject","setPostObject","textareaHeight","setTextareaHeight","inputComment","setInputComment","storedPostObject","localStorage","getItem","_JSON$parse","storedContent","JSON","parse","content","handleTextareaChange","event","inputValue","target","value","newHeight","scrollHeight","length","prevPostObject","children","CommentContainer","testDiv","CommentTextarea","placeholder","onChange","maxLength","height","fileName","_jsxFileName","lineNumber","columnNumber","CommentLengthNotify","_c","$RefreshReg$"],"sources":["/Users/sarang_daddy/Documents/second-hand/frontend/src/components/UploadComment/index.tsx"],"sourcesContent":["import { useContext, useState, useEffect } from 'react';\n\nimport {\n  postSalesItemContext,\n  PostObjectType,\n} from '../../context/SalesItem/useContext';\n\nimport * as S from './styles';\n\nconst COMMENT_PLACEHOLDER =\n  '등록하실 게시물 내용을 작성해주세요. (판매금지 물품은 게시가 제한될 수 있어요.)';\n\nconst COMMENT_MAX_LENGTH = 500;\n\n// TODO : 엔터치면 무한이 늘어나는 텍스트에어리아 높이 제한 주기\n// https://bydawn25.tistory.com/44\n\nconst UploadComment = () => {\n  const { postObject, setPostObject } = useContext(postSalesItemContext);\n  // const [inputComment, setInputComment] = useState<string | null>(\n  //   postObject.content ? postObject.content : null,\n  // );\n  const [textareaHeight, setTextareaHeight] = useState(110);\n\n  const [inputComment, setInputComment] = useState<string | null>(null);\n\n  const storedPostObject = localStorage.getItem('postObject');\n  // console.log(JSON.parse(storedPostObject));\n\n  useEffect(() => {\n    if (storedPostObject) {\n      const storedContent = JSON.parse(storedPostObject)?.content;\n      setInputComment(storedContent);\n    }\n  }, []);\n\n  // console.log(postObject);\n\n  const handleTextareaChange = (\n    event: React.ChangeEvent<HTMLTextAreaElement>,\n  ) => {\n    const inputValue = event.target.value;\n    // const rowCount = inputValue.split(/\\r\\n|\\r|\\n/).length;\n    const newHeight = event.target.scrollHeight;\n\n    setInputComment(inputValue === '' ? null : inputValue);\n\n    if (inputComment !== null && inputComment.length > inputValue.length) {\n      setTextareaHeight(newHeight - 22);\n    } else {\n      setTextareaHeight(newHeight);\n    }\n\n    setPostObject((prevPostObject: PostObjectType) => ({\n      ...prevPostObject,\n      content: inputComment,\n    }));\n  };\n\n  return (\n    <>\n      <S.CommentContainer>\n        <S.testDiv>\n          <S.CommentTextarea\n            placeholder={COMMENT_PLACEHOLDER}\n            value={inputComment || ''}\n            onChange={handleTextareaChange}\n            maxLength={COMMENT_MAX_LENGTH}\n            height={textareaHeight}\n          />\n        </S.testDiv>\n        <S.CommentLengthNotify>\n          {inputComment ? inputComment.length : 0} / {COMMENT_MAX_LENGTH}\n        </S.CommentLengthNotify>\n      </S.CommentContainer>\n    </>\n  );\n};\n\nexport default UploadComment;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}