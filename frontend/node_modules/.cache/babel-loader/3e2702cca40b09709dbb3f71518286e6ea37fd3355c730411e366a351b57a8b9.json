{"ast":null,"code":"var _jsxFileName = \"/Users/sarang_daddy/Documents/second-hand/frontend/src/components/UploadTitle/index.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useContext } from 'react';\nimport * as S from './styles';\nimport { postSalesItemContext } from '../../context/SalesItem/useContext';\nimport Icon from '../Icon';\nimport useAsync from '../../hooks/useAsync';\nimport { getCategory } from '../../api/category';\nimport { useNavigate } from 'react-router-dom';\nimport { CATEGORY_SET } from '../../constants/routeUrl';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UploadTitle = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    data\n  } = useAsync(getCategory);\n  const categoryList = data === null || data === void 0 ? void 0 : data.data;\n  const [selectedCategories, setSelectedCategories] = useState([]);\n  const [hasInputValue, setHasInputValue] = useState('');\n  const [chooseCategory, setChooseCategory] = useState(null);\n  const {\n    postObject,\n    setPostObject\n  } = useContext(postSalesItemContext);\n  useEffect(() => {\n    if (postObject.title) {\n      console.log(postObject.title);\n      setHasInputValue(postObject.title);\n    }\n    if (postObject.categoryId) {\n      setChooseCategory(postObject.categoryId);\n    }\n  }, []);\n  useEffect(() => {\n    if (hasInputValue !== null) {\n      const shuffledCategories = categoryList === null || categoryList === void 0 ? void 0 : categoryList.sort(() => 0.5 - Math.random());\n      const selectedCategories = shuffledCategories === null || shuffledCategories === void 0 ? void 0 : shuffledCategories.slice(0, 3);\n      console.log(selectedCategories);\n      // if (chooseCategory !== null) {\n      //   selectedCategories.unshift(chooseCategory);\n      // }\n      setSelectedCategories(selectedCategories);\n    } else {\n      setPostObject(prevPostObject => ({\n        ...prevPostObject,\n        title: null,\n        categoryId: null\n      }));\n    }\n  }, [hasInputValue]);\n  const handleTitleInput = event => {\n    const inputValue = event.target.value;\n    const hasValue = inputValue !== '';\n    if (hasValue) {\n      setHasInputValue(hasInputValue);\n    } else {\n      setHasInputValue('');\n      setSelectedCategories([]);\n      setChooseCategory(null);\n    }\n    setPostObject(prevPostObject => ({\n      ...prevPostObject,\n      title: inputValue\n    }));\n  };\n  const handleCategoryChoice = categoryId => {\n    setChooseCategory(categoryId);\n    setPostObject(prevPostObject => ({\n      ...prevPostObject,\n      categoryId: categoryId\n    }));\n  };\n  const handleAddClick = () => {\n    navigate(CATEGORY_SET);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(S.UploadTitle, {\n      children: [/*#__PURE__*/_jsxDEV(S.Title, {\n        children: /*#__PURE__*/_jsxDEV(S.inputTitle, {\n          placeholder: \"\\uAE00\\uC81C\\uBAA9\",\n          type: \"text\",\n          onChange: handleTitleInput,\n          maxLength: 30,\n          value: hasInputValue\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), hasInputValue && selectedCategories && /*#__PURE__*/_jsxDEV(S.Contents, {\n        children: [/*#__PURE__*/_jsxDEV(S.Categories, {\n          children: selectedCategories.map(category => /*#__PURE__*/_jsxDEV(S.Category, {\n            onClick: () => handleCategoryChoice(category.categoryId),\n            isActive: chooseCategory === category.categoryId,\n            children: category.title\n          }, category.categoryId, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(S.MoreIcon, {\n          onClick: handleAddClick,\n          children: /*#__PURE__*/_jsxDEV(Icon, {\n            name: \"chevronRight\",\n            height: \"11\",\n            width: \"22\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(UploadTitle, \"1134HQPBkWUcJLufba/X/nrmBcg=\", false, function () {\n  return [useNavigate, useAsync];\n});\n_c = UploadTitle;\nexport default UploadTitle;\nvar _c;\n$RefreshReg$(_c, \"UploadTitle\");","map":{"version":3,"names":["useEffect","useState","useContext","S","postSalesItemContext","Icon","useAsync","getCategory","useNavigate","CATEGORY_SET","jsxDEV","_jsxDEV","Fragment","_Fragment","UploadTitle","_s","navigate","data","categoryList","selectedCategories","setSelectedCategories","hasInputValue","setHasInputValue","chooseCategory","setChooseCategory","postObject","setPostObject","title","console","log","categoryId","shuffledCategories","sort","Math","random","slice","prevPostObject","handleTitleInput","event","inputValue","target","value","hasValue","handleCategoryChoice","handleAddClick","children","Title","inputTitle","placeholder","type","onChange","maxLength","fileName","_jsxFileName","lineNumber","columnNumber","Contents","Categories","map","category","Category","onClick","isActive","MoreIcon","name","height","width","_c","$RefreshReg$"],"sources":["/Users/sarang_daddy/Documents/second-hand/frontend/src/components/UploadTitle/index.tsx"],"sourcesContent":["import { useEffect, useState, useContext } from 'react';\n\nimport * as S from './styles';\n\nimport {\n  postSalesItemContext,\n  PostObjectType,\n} from '../../context/SalesItem/useContext';\nimport Icon from '../Icon';\nimport useAsync from '../../hooks/useAsync';\nimport { getCategory } from '../../api/category';\nimport { useNavigate } from 'react-router-dom';\nimport { CATEGORY_SET } from '../../constants/routeUrl';\n\ninterface Category {\n  categoryId: number;\n  title: string;\n  categoryImgUrl: string;\n}\n\nconst UploadTitle = () => {\n  const navigate = useNavigate();\n  const { data } = useAsync(getCategory);\n  const categoryList: Category[] = data?.data;\n\n  const [selectedCategories, setSelectedCategories] = useState<Category[]>([]);\n  const [hasInputValue, setHasInputValue] = useState<string>('');\n  const [chooseCategory, setChooseCategory] = useState<number | null>(null);\n\n  const { postObject, setPostObject } = useContext(postSalesItemContext);\n\n  useEffect(() => {\n    if (postObject.title) {\n      console.log(postObject.title);\n      setHasInputValue(postObject.title);\n    }\n    if (postObject.categoryId) {\n      setChooseCategory(postObject.categoryId);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (hasInputValue !== null) {\n      const shuffledCategories = categoryList?.sort(() => 0.5 - Math.random());\n      const selectedCategories = shuffledCategories?.slice(0, 3);\n      console.log(selectedCategories);\n      // if (chooseCategory !== null) {\n      //   selectedCategories.unshift(chooseCategory);\n      // }\n      setSelectedCategories(selectedCategories);\n    } else {\n      setPostObject((prevPostObject: PostObjectType) => ({\n        ...prevPostObject,\n        title: null,\n        categoryId: null,\n      }));\n    }\n  }, [hasInputValue]);\n\n  const handleTitleInput = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const inputValue = event.target.value;\n    const hasValue = inputValue !== '';\n\n    if (hasValue) {\n      setHasInputValue(hasInputValue);\n    } else {\n      setHasInputValue('');\n      setSelectedCategories([]);\n      setChooseCategory(null);\n    }\n\n    setPostObject((prevPostObject: PostObjectType) => ({\n      ...prevPostObject,\n      title: inputValue,\n    }));\n  };\n\n  const handleCategoryChoice = (categoryId: number) => {\n    setChooseCategory(categoryId);\n\n    setPostObject((prevPostObject: PostObjectType) => ({\n      ...prevPostObject,\n      categoryId: categoryId,\n    }));\n  };\n\n  const handleAddClick = () => {\n    navigate(CATEGORY_SET);\n  };\n\n  return (\n    <>\n      <S.UploadTitle>\n        <S.Title>\n          <S.inputTitle\n            placeholder=\"글제목\"\n            type=\"text\"\n            onChange={handleTitleInput}\n            maxLength={30}\n            value={hasInputValue}\n          />\n        </S.Title>\n        {hasInputValue && selectedCategories && (\n          <S.Contents>\n            <S.Categories>\n              {selectedCategories.map((category) => (\n                <S.Category\n                  key={category.categoryId}\n                  onClick={() => handleCategoryChoice(category.categoryId)}\n                  isActive={chooseCategory === category.categoryId}\n                >\n                  {category.title}\n                </S.Category>\n              ))}\n            </S.Categories>\n            <S.MoreIcon onClick={handleAddClick}>\n              <Icon name=\"chevronRight\" height=\"11\" width=\"22\" />\n            </S.MoreIcon>\n          </S.Contents>\n        )}\n      </S.UploadTitle>\n    </>\n  );\n};\n\nexport default UploadTitle;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}